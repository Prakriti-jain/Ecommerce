<!-- NAVBAR -->
<div *ngIf ="showNavbar$ | async">
  <div class="navbar">

    <div class="logo" routerLink = "/">ðŸ›’ E-Store</div>

    <div class = "top-bar">
      <input type = "text" placeholder="Search products..." class = "search" (input) ="onSearch($event)"/>

      <select (change) = "sortProducts($event)" class = "sort">
        <option value = "">Sort by</option>
        <option value = "low"> Price: Low to High </option>
        <option value = "high"> Price: High to Low </option>
      </select>
    </div>

    <div class="nav-right" >

      <!-- LOGGED IN -->
      <ng-container  *ngIf = "loggedUser$ | async as loggedUser; else loggedOut">

        <div class="profile" (click) = "toggleProfileMenu()">
          ðŸ‘¤ {{loggedUser.username}}

          <div class="dropdown" *ngIf = "showProfileMenu">

            <button routerLink="/profile">View Profile</button>
            <button routerLink="/profile/update">Update Profile</button>
            <button routerLink="/orders">My Orders</button>


            <button class="logout-btn" (click) = "logout()">Logout</button>
  
          </div>
        </div>

      </ng-container>

            <!-- NOT LOGGED IN -->
       <ng-template #loggedOut>
        <button routerLink="/login">Login</button>
        <button routerLink="/signup">Signup</button>
       </ng-template>

      <button (click) = "goToCart()" class = "cart-btn-user"> ðŸ›’ Cart 
        <span class = "cart-btn-badge" *ngIf = "(cartCount$ | async) as count"> {{ count }} </span>
      </button>

    </div>

  </div>
</div>


